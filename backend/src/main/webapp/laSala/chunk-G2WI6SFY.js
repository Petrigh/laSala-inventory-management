import{a as Ae}from"./chunk-5CZITQUW.js";import{a as Me,b as V,c as ke}from"./chunk-644H75FQ.js";import{A as Te,B as Pe,C as Ue,D as T,a as be,b as ge,d as ze,e as xe,m as _e,n as ve,o as Se,s as we,t as ye,u as Fe,v as Oe,w as Ie,x as Ee,y as Ne,z as Ve}from"./chunk-LR7HS7ST.js";import{Ka as oe,La as re,Ma as ae,Na as le,Oa as se,Ta as me,U as ie,Ua as ce,V as ne,Va as de,Wa as pe,Xa as ue,Ya as fe,c as I,d as h,f as E,g as J,h as K,i as Q,k as Y,n as Z,o as $,p as ee,r as N,s as te}from"./chunk-RDDHBD4O.js";import"./chunk-WYLD3DAA.js";import{b as X,m as he,n as Ce}from"./chunk-JBFZACTD.js";import{$b as L,Ca as b,Cc as F,Da as g,Db as n,Dc as j,Eb as i,Fb as p,Ib as w,Kc as O,Lb as x,Nb as u,Ub as A,Vb as l,Xb as M,Yb as G,Zb as R,_b as D,bc as y,cc as H,d as U,db as m,eb as f,ga as q,la as W,nb as B,ra as S,tb as z,v as k,vb as c}from"./chunk-FXUVGPCX.js";var v=class{constructor(t){this.id=t?.id,this.nombre=t?.nombre,this.usuario=t?.usuario,this.apellido=t?.apellido,this.email=t?.email,this.password=t?.password,this.salt=t?.salt,this.rol=t?.rol,this.active=t?.active}};var P=(()=>{let t=class t{constructor(e){this.http=e,this.apiUrl=he.apiUrl+"/usuario"}getUsuarios(){return this.http.get(this.apiUrl)}updateUsers(e,o){return o?this.http.put(this.apiUrl,e):this.http.post(this.apiUrl,e)}deleteUsuario(e){return this.http.delete(this.apiUrl+"/"+e)}activateUsuario(e){return this.http.put(this.apiUrl+"/activate/"+e,null)}getRolesColabs(){return this.http.get(this.apiUrl+"/roles")}};t.\u0275fac=function(o){return new(o||t)(W(X))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();function Be(r,t){if(r&1&&p(0,"nz-option",23),r&2){let s=t.$implicit;c("nzValue",s)("nzLabel",s)}}var Le=(()=>{let t=class t{constructor(e,o){this.fb=e,this.colService=o,this.usuario=new v(null),this.edit=!1,this.roles=[],this.validateForm=this.fb.group({id:[null],usuario:[null,[h.required]],nombre:[null,[h.required]],apellido:[null,[h.required]],email:[null,[h.email,h.required]],password:[null,[h.required]],salt:[null],active:[!0],rol:[null,[h.required]]})}ngOnInit(){this.colService.getRolesColabs().subscribe(e=>this.roles=e)}patchFormValues(e){e&&(this.usuario=e,this.edit=!0,this.validateForm.patchValue(this.usuario),this.validateForm.get("password")?.patchValue(this.usuario.password.substring(0,7)))}submitForm(){let e=new v(this.validateForm.getRawValue());return this.edit&&e.password==this.usuario?.password.substring(0,7)&&(e.password=this.usuario.password),e}};t.\u0275fac=function(o){return new(o||t)(f(ee),f(P))},t.\u0275cmp=S({type:t,selectors:[["app-form-usuario"]],standalone:!0,features:[y],decls:40,vars:2,consts:[["nz-form","",3,"ngSubmit","formGroup"],[1,"row"],[1,"form-item"],["nzFor","nombre","nzRequired","",1,"form-label"],["nzErrorTip","Ingrese un nombre",1,"form-control"],["nz-input","","formControlName","nombre","id","nombre"],["nzFor","apellido","nzRequired",""],["nzErrorTip","Ingrese un apellido"],["nz-input","","formControlName","apellido","id","apellido"],["nzFor","usuario","nzRequired",""],["nzErrorTip","Ingrese nombre de usuario"],["nz-input","","formControlName","usuario","id","usuario"],["nzFor","password","nzRequired",""],["nzErrorTip","Ingrese una contrase\xF1a"],["nz-input","","type","password","maxlength","10","formControlName","password","id","password"],["nzFor","email","nzRequired",""],["nzErrorTip","Ingrese una direccion de email"],["nz-input","","formControlName","email","id","email"],["nzFor","rol","nzRequired",""],["nzErrorTip","Rol es requerido"],["formControlName","rol","id","rol",1,"rolSelect"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-checkbox","","formControlName","active","id","active"],[3,"nzValue","nzLabel"]],template:function(o,a){o&1&&(n(0,"form",0),x("ngSubmit",function(){return a.submitForm()}),n(1,"div",1)(2,"nz-form-item",2)(3,"nz-form-label",3),l(4,"Nombre"),i(),n(5,"nz-form-control",4),p(6,"input",5),i()(),n(7,"nz-form-item",2)(8,"nz-form-label",6),l(9,"Apellido"),i(),n(10,"nz-form-control",7),p(11,"input",8),i()()(),n(12,"div",1)(13,"nz-form-item",2)(14,"nz-form-label",9),l(15,"Usuario"),i(),n(16,"nz-form-control",10),p(17,"input",11),i()(),n(18,"nz-form-item",2)(19,"nz-form-label",12),l(20,"Contrase\xF1a"),i(),n(21,"nz-form-control",13),p(22,"input",14),i()()(),n(23,"div",1)(24,"nz-form-item",2)(25,"nz-form-label",15),l(26,"Email"),i(),n(27,"nz-form-control",16),p(28,"input",17),i()(),n(29,"nz-form-item",2)(30,"nz-form-label",18),l(31,"Rol"),i(),n(32,"nz-form-control",19)(33,"nz-select",20),z(34,Be,1,2,"nz-option",21),i()()()(),n(35,"nz-form-item")(36,"nz-form-label",18),l(37,"Activo"),i(),n(38,"nz-form-control",19),p(39,"label",22),i()()()),o&2&&(c("formGroup",a.validateForm),m(34),c("ngForOf",a.roles))},dependencies:[V,O,F,N,Q,I,E,J,$,te,Y,Z,se,ne,ie,re,oe,le,ae,T,Oe,ye,Fe,ce,me],styles:[".form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:left;align-items:start}.row[_ngcontent-%COMP%]{display:grid;grid-template:100px / auto auto;row-gap:15px}.rolSelect[_ngcontent-%COMP%]{min-width:180px}"]});let r=t;return r})();var Ge=()=>({y:"450px"});function He(r,t){if(r&1){let s=w();n(0,"button",18),x("click",function(){b(s);let o=u();return g(o.showModal(void 0))}),p(1,"fa-icon",19),l(2," A\xF1adir Usuario "),i()}if(r&2){let s=u();m(),c("icon",s.addIcon)}}function je(r,t){r&1&&(n(0,"th",10),l(1,"EDITAR"),i())}function Xe(r,t){if(r&1&&(n(0,"td"),p(1,"fa-icon",22),i()),r&2){let s=u(2);m(),c("icon",s.userActive)}}function Je(r,t){if(r&1&&(n(0,"td"),p(1,"fa-icon",23),i()),r&2){let s=u(2);m(),c("icon",s.userInactive)}}function Ke(r,t){if(r&1){let s=w();n(0,"td",24),x("click",function(){b(s);let o=u().$implicit,a=u();return g(a.showModal(o))}),p(1,"fa-icon",25),i()}if(r&2){let s=u(2);m(),c("icon",s.editIcon)}}function Qe(r,t){if(r&1&&(n(0,"tr")(1,"td"),l(2),i(),n(3,"td"),l(4),i(),n(5,"td"),l(6),i(),n(7,"td"),l(8),i(),z(9,Xe,2,1,"td",20)(10,Je,2,1,"td",20)(11,Ke,2,1,"td",21),i()),r&2){let s=t.$implicit,e=u();m(2),G(" ",s.nombre,"\xA0",s.apellido," "),m(2),M(" ",s.usuario," "),m(2),M(" ",s.email," "),m(2),M(" ",s.rol," "),m(),c("ngIf",s.active),m(),c("ngIf",!s.active),m(),c("ngIf",e.isAdmin)}}var qe=(()=>{let t=class t{constructor(e,o,a,d){this.colabService=e,this.userService=o,this.modal=a,this.viewContainerRef=d,this.addIcon=Se,this.buscarIcon=ve,this.editIcon=ze,this.userActive=xe,this.userInactive=_e,this.listColab=[],this.datosTabla=[],this.isAdmin=!1,this.searchValue="",this.visible=!1,this.nzOk=!1}ngOnInit(){this.userService.isAdmin$.subscribe(e=>{this.isAdmin=e}),this.colabService.getUsuarios().subscribe(e=>{this.listColab=e,this.datosTabla=e})}reset(){this.searchValue="",this.search()}search(){this.visible=!1,this.datosTabla=this.listColab.filter(e=>e.nombre.toLocaleUpperCase().indexOf(this.searchValue.toLocaleUpperCase())!==-1||e.apellido.toLocaleUpperCase().indexOf(this.searchValue.toLocaleUpperCase())!==-1)}onSubmit(e,o,a){return U(this,null,function*(){try{if(o.validateForm.valid)yield k(this.colabService.updateUsers(o.submitForm(),e)),a.close(),this.listColab=yield k(this.colabService.getUsuarios()),this.datosTabla=this.listColab;else for(let d in o.validateForm.controls)o.validateForm.controls.hasOwnProperty(d)&&(o.validateForm.controls[d].markAsDirty(),o.validateForm.controls[d].updateValueAndValidity())}catch(d){console.error("Error updating user",d)}})}showModal(e){let o=this.modal.create({nzTitle:e?"Editar Usuario":"Cargar Usuario",nzContent:Le,nzViewContainerRef:this.viewContainerRef,nzCentered:!0,nzFooter:[{label:"Cancelar",type:"text",danger:!1,onClick:()=>o.destroy()},{label:e?"Editar":"Cargar",type:"primary",danger:!1,onClick:()=>U(this,null,function*(){this.modal.confirm({nzCentered:!0,nzTitle:"Confirmar "+(e?"edicion?":"guardado?"),nzOnOk:()=>this.onSubmit(!!e,o.getContentComponent(),o),nzOkText:e?"Editar":"Guardar",nzCancelText:"Cancelar"})})}]});e&&o.componentInstance.patchFormValues(e)}};t.\u0275fac=function(o){return new(o||t)(f(P),f(Ce),f(Me),f(B))},t.\u0275cmp=S({type:t,selectors:[["app-colaboradorxs"]],standalone:!0,features:[y],decls:34,vars:12,consts:[["tablaUsuario",""],["menu","nzDropdownMenu"],[1,"header-container"],[1,"title"],[1,"spacer"],["class","buttonAdd","nz-button","",3,"click",4,"ngIf"],[3,"nzData","nzPageSize","nzScroll"],["nzWidth","100px"],[3,"nzVisibleChange","nzVisible","nzActive","nzDropdownMenu"],[1,"buscarIcon",3,"icon"],["nzWidth","50px"],["nzWidth","50px",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","Search name",3,"ngModelChange","ngModel"],["nz-button","","nzSize","small",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["nz-button","",1,"buttonAdd",3,"click"],[3,"icon"],[4,"ngIf"],["class","tableHover",3,"click",4,"ngIf"],[2,"color","#395144","font-size","18px",3,"icon"],[2,"color","red","font-size","18px",3,"icon"],[1,"tableHover",3,"click"],[1,"tableIcon",3,"icon"]],template:function(o,a){if(o&1){let d=w();n(0,"body")(1,"div",2)(2,"h1",3),l(3,"Usuarios"),i(),p(4,"div",4),z(5,He,3,1,"button",5),i(),n(6,"nz-table",6,0)(8,"thead")(9,"tr")(10,"th",7),l(11,"NOMBRE "),n(12,"nz-filter-trigger",8),L("nzVisibleChange",function(C){return b(d),D(a.visible,C)||(a.visible=C),g(C)}),p(13,"fa-icon",9),i()(),n(14,"th",7),l(15,"USUARIO"),i(),n(16,"th",7),l(17,"EMAIL"),i(),n(18,"th",7),l(19,"ROL"),i(),n(20,"th",10),l(21,"ACTIVO"),i(),z(22,je,2,0,"th",11),i()(),n(23,"tbody"),z(24,Qe,12,8,"tr",12),i()(),n(25,"nz-dropdown-menu",null,1)(27,"div",13)(28,"div",14)(29,"input",15),L("ngModelChange",function(C){return b(d),D(a.searchValue,C)||(a.searchValue=C),g(C)}),i(),n(30,"button",16),x("click",function(){return b(d),g(a.search())}),l(31,"Buscar"),i(),n(32,"button",17),x("click",function(){return b(d),g(a.reset())}),l(33,"Limpiar"),i()()()()()}if(o&2){let d=A(7),_=A(26);m(5),c("ngIf",a.isAdmin),m(),c("nzData",a.datosTabla)("nzPageSize",7)("nzScroll",H(11,Ge)),m(6),R("nzVisible",a.visible),c("nzActive",a.searchValue.length>0)("nzDropdownMenu",_),m(),c("icon",a.buscarIcon),m(9),c("ngIf",a.isAdmin),m(2),c("ngForOf",d.data),m(5),R("ngModel",a.searchValue)}},dependencies:[j,F,O,N,I,E,K,T,Te,Ee,Ne,Ue,Ve,Pe,Ie,V,we,fe,ue,de,pe,ge,be],styles:["body[_ngcontent-%COMP%]{background-color:#bdd2c4;display:flex;justify-content:center;flex-direction:column;align-items:center;margin:0;padding:160px}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#395144;color:#f0ebce;white-space:nowrap;text-align:center}.buscarIcon[_ngcontent-%COMP%]{color:#8a6a44;font-size:16px}.buscarIcon[_ngcontent-%COMP%]:hover{color:orange}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #f1ecec}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none}.header-container[_ngcontent-%COMP%]{padding-right:20px;width:100%;display:flex;align-items:center;margin-bottom:20px}.title[_ngcontent-%COMP%]{margin:0;color:#395144;font-size:30px;font-weight:700}.spacer[_ngcontent-%COMP%]{flex-grow:1}.buttonAdd[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:7px;margin-left:auto;background-color:#8a6a44!important;border-color:#8a6a44!important;color:#f0ebce!important}.tableHover[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}.tableHover[_ngcontent-%COMP%]:hover{cursor:pointer}.tableHover[_ngcontent-%COMP%]:hover > .tableIcon[_ngcontent-%COMP%]{color:orange}.tableIcon[_ngcontent-%COMP%]{color:#8a6a44;font-weight:700;font-size:18px}.search-box[_ngcontent-%COMP%]{padding:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:188px;margin-bottom:8px;display:block}.search-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px}.search-button[_ngcontent-%COMP%]{margin-right:8px;background-color:#8a6a44;border-color:#8a6a44;color:#f0ebce}"]});let r=t;return r})();var kt=[{path:"",component:qe,canActivate:[ke,Ae]}];export{kt as COLABORADORXS_ROUTES};
