import{a as Ee}from"./chunk-5CZITQUW.js";import{a as _e,b as ze,c as Ne}from"./chunk-644H75FQ.js";import{A as Ie,B as Oe,C as Te,D as Ve,a as ue,b as fe,d as he,n as Ce,o as ge,s as be,t as ve,u as xe,v as Se,w as ye,x as we,y as Me,z as Fe}from"./chunk-LR7HS7ST.js";import{Ka as ne,La as ie,Ma as oe,Na as re,Oa as ae,U as ee,V as te,Va as le,Wa as ce,Xa as se,Ya as me,c as O,d as T,f as V,g as $,h as J,i as K,k as Q,n as X,p as Y,r as N,s as Z}from"./chunk-RDDHBD4O.js";import"./chunk-WYLD3DAA.js";import{b as H,m as pe,n as de}from"./chunk-JBFZACTD.js";import{$b as R,Ca as g,Cc as F,Da as b,Db as a,Dc as G,Eb as r,Fb as u,Ib as w,Kc as I,Lb as _,Nb as d,Ub as P,Vb as p,Wb as k,Xb as q,Zb as D,_b as A,ab as L,bc as M,d as v,db as c,eb as f,ga as W,la as B,nb as j,ra as y,tb as h,v as x,vb as s}from"./chunk-FXUVGPCX.js";var S=class{constructor(n){this.id=n?.id,this.nombre=n?.nombre,this.direccion=n?.direccion,this.tipo=n?.tipo}},U=function(t){return t[t.WEB=0]="WEB",t[t.FISICO=1]="FISICO",t}(U||{});var E=(()=>{let n=class n{constructor(e){this.http=e,this.apiUrl=pe.apiUrl+"/canal"}getCanales(){return this.http.get(this.apiUrl)}getCanalById(e){return this.http.get(this.apiUrl+"/"+e)}updateCanals(e,i){return i?this.http.put(this.apiUrl+"/"+e.id,e):this.http.post(this.apiUrl,e)}deleteCanal(e){return this.http.delete(this.apiUrl+"/"+e)}getTipoCanales(){return this.http.get(this.apiUrl+"/tipos")}};n.\u0275fac=function(i){return new(i||n)(B(H))},n.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function Ue(t,n){if(t&1&&u(0,"nz-option",12),t&2){let l=n.$implicit;s("nzValue",l)("nzLabel",l)}}var De=(()=>{let n=class n{constructor(e,i){this.fb=e,this.canalService=i,this.canal=new S(null),this.edit=!1,this.tipos=[],this.validateForm=this.fb.group({id:[null],nombre:[null,T.required],direccion:[null,T.required],tipo:[null,T.required]})}ngOnInit(){this.canalService.getTipoCanales().subscribe(e=>this.tipos=e)}submitForm(){return new S(this.validateForm.getRawValue())}patchFormValues(e){e&&(this.canal=e,this.edit=!0,this.validateForm.patchValue(this.canal))}};n.\u0275fac=function(i){return new(i||n)(f(Y),f(E))},n.\u0275cmp=y({type:n,selectors:[["app-form-canal"]],standalone:!0,features:[M],decls:19,vars:2,consts:[["nz-form","",3,"ngSubmit","formGroup"],[1,"form-item"],["nzFor","nombre","nzRequired","",1,"form-label"],["nzErrorTip","Ingrese un nombre",1,"form-control"],["nz-input","","formControlName","nombre","id","nombre"],["nzFor","direccion","nzRequired","",1,"form-label"],["nzErrorTip","Ingrese un direccion",1,"form-control"],["nz-input","","formControlName","direccion","id","direccion"],["nzFor","tipo","nzRequired",""],["nzErrorTip","Ubicacion es requerida"],["formControlName","tipo","id","tipo",1,"rolSelect"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(i,o){i&1&&(a(0,"form",0),_("ngSubmit",function(){return o.submitForm()}),a(1,"nz-form-item",1)(2,"div")(3,"nz-form-label",2),p(4,"Nombre"),r(),a(5,"nz-form-control",3),u(6,"input",4),r()()(),a(7,"nz-form-item",1)(8,"div")(9,"nz-form-label",5),p(10,"Direccion"),r(),a(11,"nz-form-control",6),u(12,"input",7),r()()(),a(13,"nz-form-item",1)(14,"nz-form-label",8),p(15,"Ubicacion"),r(),a(16,"nz-form-control",9)(17,"nz-select",10),h(18,Ue,1,2,"nz-option",11),r()()()()),i&2&&(s("formGroup",o.validateForm),c(18),s("ngForOf",o.tipos))},dependencies:[I,F,Z,K,O,V,$,Q,X,N,ae,te,ee,ie,ne,re,oe,Se,ve,xe],styles:[".form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:left;align-items:start}.row[_ngcontent-%COMP%]{display:grid;grid-template:100px / auto auto;row-gap:15px}.rolSelect[_ngcontent-%COMP%]{min-width:180px}"]});let t=n;return t})();function We(t,n){if(t&1){let l=w();a(0,"button",17),_("click",function(){g(l);let i=d();return b(i.showModal(void 0))}),u(1,"fa-icon",18),p(2," A\xF1adir Canal "),r()}if(t&2){let l=d();c(),s("icon",l.addIcon)}}function Be(t,n){t&1&&(a(0,"th",7),p(1,"EDITAR"),r())}function Le(t,n){if(t&1&&(a(0,"span"),p(1),r()),t&2){let l=d().$implicit;c(),k(l.direccion)}}function je(t,n){if(t&1&&(a(0,"a",22),p(1),r()),t&2){let l=d().$implicit,e=d();s("href",e.getFullUrl(l.direccion),L),c(),k(l.direccion)}}function qe(t,n){if(t&1){let l=w();a(0,"td",23),_("click",function(){g(l);let i=d().$implicit,o=d();return b(o.showModal(i))}),u(1,"fa-icon",24),r()}if(t&2){let l=d(2);c(),s("icon",l.editIcon)}}function Ge(t,n){if(t&1&&(a(0,"tr")(1,"td"),p(2),r(),a(3,"td"),h(4,Le,2,1,"span",19)(5,je,2,2,"a",20),r(),h(6,qe,2,1,"td",21),r()),t&2){let l=n.$implicit,e=d();c(2),q(" ",l.nombre," "),c(2),s("ngIf",e.tipoCheck(l.tipo)==1),c(),s("ngIf",e.tipoCheck(l.tipo)==0),c(),s("ngIf",e.isAdmin)}}var Ae=(()=>{let n=class n{constructor(e,i,o,m){this.userService=e,this.canalService=i,this.modal=o,this.viewContainerRef=m,this.addIcon=ge,this.buscarIcon=Ce,this.editIcon=he,this.canales=[],this.datosTabla=[],this.isAdmin=!1,this.ubicacion=U,this.searchValue="",this.visible=!1}ngOnInit(){this.userService.isAdmin$.subscribe(e=>{this.isAdmin=e}),this.canalService.getCanales().subscribe(e=>{this.canales=e,this.datosTabla=e})}tipoCheck(e){switch(e.toString()){case"WEB":return 0;case"FISICO":return 1;default:return 1}}getFullUrl(e){return/^https?:\/\//i.test(e)?e:"http://"+e}reset(){this.searchValue="",this.search()}search(){this.visible=!1,this.datosTabla=this.canales.filter(e=>e.nombre.toLocaleUpperCase().indexOf(this.searchValue.toLocaleUpperCase())!==-1)}onDelete(e,i){return v(this,null,function*(){yield x(this.canalService.deleteCanal(e)),i.close(),this.canales=yield x(this.canalService.getCanales()),this.datosTabla=this.canales})}onSubmit(e,i,o){return v(this,null,function*(){try{if(i.validateForm.valid)yield x(this.canalService.updateCanals(i.submitForm(),e)),o.close(),this.canales=yield x(this.canalService.getCanales()),this.datosTabla=this.canales;else for(let m in i.validateForm.controls)i.validateForm.controls.hasOwnProperty(m)&&(i.validateForm.controls[m].markAsDirty(),i.validateForm.controls[m].updateValueAndValidity())}catch(m){console.error("Error updating canales",m)}})}showModal(e){let i=[{label:"Cancelar",type:"text",danger:!1,onClick:()=>o.destroy()},{label:e?"Editar":"Cargar",type:"primary",danger:!1,onClick:()=>v(this,null,function*(){this.modal.confirm({nzCentered:!0,nzTitle:"Confirmar "+(e?"edicion?":"guardado?"),nzOnOk:()=>this.onSubmit(!!e,o.getContentComponent(),o),nzOkText:e?"Editar":"Guardar",nzCancelText:"Cancelar"})})}];e&&i.push({label:"Eliminar",type:"primary",danger:!0,onClick:()=>v(this,null,function*(){this.modal.warning({nzCentered:!0,nzTitle:"Eliminar Canal?",nzOnOk:()=>this.onDelete(e.id,o),nzOkText:"Eliminar",nzCancelText:"Cancelar"})})});let o=this.modal.create({nzTitle:e?"Editar Canal":"Cargar Canal",nzContent:De,nzViewContainerRef:this.viewContainerRef,nzCentered:!0,nzWidth:350,nzFooter:i});e&&o.componentInstance.patchFormValues(e)}};n.\u0275fac=function(i){return new(i||n)(f(de),f(E),f(_e),f(j))},n.\u0275cmp=y({type:n,selectors:[["app-canales"]],standalone:!0,features:[M],decls:28,vars:10,consts:[["tablaFamilias",""],["menu","nzDropdownMenu"],[1,"header-container"],[1,"title"],[1,"spacer"],["class","buttonAdd","nz-button","",3,"click",4,"ngIf"],[2,"width","100%",3,"nzData","nzPageSize"],["nzWidth","auto"],[3,"nzVisibleChange","nzVisible","nzActive","nzDropdownMenu"],[1,"buscarIcon",3,"icon"],["nzWidth","auto",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","Search name",3,"ngModelChange","ngModel"],["nz-button","","nzSize","small",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["nz-button","",1,"buttonAdd",3,"click"],[3,"icon"],[4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],["class","tableHover",3,"click",4,"ngIf"],["target","_blank",3,"href"],[1,"tableHover",3,"click"],[1,"tableIcon",3,"icon"]],template:function(i,o){if(i&1){let m=w();a(0,"body")(1,"div",2)(2,"h1",3),p(3,"Canales de Venta"),r(),u(4,"div",4),h(5,We,3,1,"button",5),r(),a(6,"nz-table",6,0)(8,"thead")(9,"tr")(10,"th",7),p(11,"NOMBRE "),a(12,"nz-filter-trigger",8),R("nzVisibleChange",function(C){return g(m),A(o.visible,C)||(o.visible=C),b(C)}),u(13,"fa-icon",9),r()(),a(14,"th",7),p(15,"DIRECCION"),r(),h(16,Be,2,0,"th",10),r()(),a(17,"tbody"),h(18,Ge,7,4,"tr",11),r()(),a(19,"nz-dropdown-menu",null,1)(21,"div",12)(22,"div",13)(23,"input",14),R("ngModelChange",function(C){return g(m),A(o.searchValue,C)||(o.searchValue=C),b(C)}),r(),a(24,"button",15),_("click",function(){return g(m),b(o.search())}),p(25,"Buscar"),r(),a(26,"button",16),_("click",function(){return g(m),b(o.reset())}),p(27,"Limpiar"),r()()()()()}if(i&2){let m=P(7),z=P(20);c(5),s("ngIf",o.isAdmin),c(),s("nzData",o.datosTabla)("nzPageSize",7),c(6),D("nzVisible",o.visible),s("nzActive",o.searchValue.length>0)("nzDropdownMenu",z),c(),s("icon",o.buscarIcon),c(3),s("ngIf",o.isAdmin),c(2),s("ngForOf",m.data),c(5),D("ngModel",o.searchValue)}},dependencies:[G,F,I,N,O,V,J,Ve,Ie,we,Me,Te,Fe,Oe,ye,ze,be,me,se,le,ce,fe,ue],styles:["body[_ngcontent-%COMP%]{background-color:#bdd2c4;display:flex;justify-content:center;flex-direction:column;align-items:center;margin:0;padding:160px}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#395144;color:#f0ebce;white-space:nowrap;text-align:center}.buscarIcon[_ngcontent-%COMP%]{color:#8a6a44;font-size:16px}.buscarIcon[_ngcontent-%COMP%]:hover{color:orange}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #f1ecec}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none}.header-container[_ngcontent-%COMP%]{padding-right:20px;width:100%;display:flex;align-items:center;margin-bottom:20px}.title[_ngcontent-%COMP%]{margin:0;color:#395144;font-size:30px;font-weight:700}.spacer[_ngcontent-%COMP%]{flex-grow:1}.buttonAdd[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:7px;margin-left:auto;background-color:#8a6a44!important;border-color:#8a6a44!important;color:#f0ebce!important}.tableHover[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}.tableHover[_ngcontent-%COMP%]:hover{cursor:pointer}.tableHover[_ngcontent-%COMP%]:hover > .tableIcon[_ngcontent-%COMP%]{color:orange}.tableIcon[_ngcontent-%COMP%]{color:#8a6a44;font-weight:700;font-size:18px}.search-box[_ngcontent-%COMP%]{padding:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:188px;margin-bottom:8px;display:block}.search-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px}.search-button[_ngcontent-%COMP%]{margin-right:8px;background-color:#8a6a44;border-color:#8a6a44;color:#f0ebce}"]});let t=n;return t})();var It=[{path:"",component:Ae,canActivate:[Ne,Ee]}];export{It as CANALES_ROUTES};
