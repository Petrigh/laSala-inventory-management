import{a as le,b as me}from"./chunk-WEBN3R7M.js";import{b as ce}from"./chunk-3TB4TDSS.js";import{a as Y,b as Z,c as se}from"./chunk-644H75FQ.js";import{A as ie,B as oe,C as re,D as ae,a as G,b as q,d as J,n as K,o as Q,s as X,w as $,x as ee,y as te,z as ne}from"./chunk-LR7HS7ST.js";import{Va as B,Wa as U,Xa as j,Ya as H,c as N,f as D,h as R,r as W}from"./chunk-RDDHBD4O.js";import"./chunk-WYLD3DAA.js";import{n as L}from"./chunk-JBFZACTD.js";import{$b as k,Ca as f,Cc as A,Da as g,Db as a,Dc as E,Eb as o,Fb as C,Ib as I,Kc as F,Lb as v,Nb as p,Ub as S,Vb as d,Xb as z,Zb as w,_b as y,bc as P,cc as V,d as x,db as r,eb as _,nb as O,ra as T,tb as b,v as M,vb as m}from"./chunk-FXUVGPCX.js";var pe=()=>({y:"450px"});function ue(n,s){if(n&1){let l=I();a(0,"button",17),v("click",function(){f(l);let i=p();return g(i.showModal(void 0))}),C(1,"fa-icon",18),d(2," A\xF1adir Insumo "),o()}if(n&2){let l=p();r(),m("icon",l.addIcon)}}function fe(n,s){n&1&&(a(0,"th",7),d(1,"PRECIO UNITARIO"),o())}function ge(n,s){n&1&&(a(0,"th",7),d(1,"EDITAR"),o())}function he(n,s){if(n&1&&(a(0,"td"),d(1),o()),n&2){let l=p().$implicit;r(),z(" ",l.precioUnitario," ")}}function _e(n,s){if(n&1){let l=I();a(0,"td",21),v("click",function(){f(l);let i=p().$implicit,e=p();return g(e.showModal(i))}),C(1,"fa-icon",22),o()}if(n&2){let l=p(2);r(),m("icon",l.editIcon)}}function be(n,s){if(n&1&&(a(0,"tr")(1,"td"),d(2),o(),a(3,"td"),d(4),o(),b(5,he,2,1,"td",19)(6,_e,2,1,"td",20),o()),n&2){let l=s.$implicit,t=p();r(2),z(" ",l.nombre," "),r(2),z(" ",l.cantidad," "),r(),m("ngIf",t.isAdmin),r(),m("ngIf",t.isAdmin)}}var de=(()=>{let s=class s{constructor(t,i,e,c){this.stockService=t,this.userService=i,this.modal=e,this.viewContainerRef=c,this.addIcon=Q,this.buscarIcon=K,this.editIcon=J,this.listInsumos=[],this.datosTabla=[],this.isAdmin=!1,this.searchValue="",this.visible=!1}ngOnInit(){this.userService.isAdmin$.subscribe(t=>{this.isAdmin=t}),this.stockService.getMateriaPrima().subscribe(t=>{this.listInsumos=t,this.datosTabla=t})}reset(){this.searchValue="",this.search()}search(){this.visible=!1,this.datosTabla=this.listInsumos.filter(t=>t.nombre.toLocaleUpperCase().indexOf(this.searchValue.toLocaleUpperCase())!==-1)}onSubmit(t,i,e){return x(this,null,function*(){try{if(i.validateForm.valid)yield M(this.stockService.updateBien(i.submitForm(),t)),e.close(),this.listInsumos=yield M(this.stockService.getMateriaPrima()),this.datosTabla=this.listInsumos;else for(let c in i.validateForm.controls)i.validateForm.controls.hasOwnProperty(c)&&(i.validateForm.controls[c].markAsDirty(),i.validateForm.controls[c].updateValueAndValidity())}catch(c){console.error("Error updating Materias Primas",c)}})}showModal(t){let i=[{label:"Cancelar",type:"text",danger:!1,onClick:()=>e.destroy()},{label:t?"Editar":"Cargar",type:"primary",danger:!1,onClick:()=>x(this,null,function*(){this.modal.confirm({nzCentered:!0,nzTitle:"Confirmar "+(t?"edicion?":"guardado?"),nzOnOk:()=>this.onSubmit(!!t,e.getContentComponent(),e),nzOkText:t?"Editar":"Guardar",nzCancelText:"Cancelar"})})}],e=this.modal.create({nzTitle:t?"Editar Insumo":"Cargar Insumo",nzContent:le,nzViewContainerRef:this.viewContainerRef,nzCentered:!0,nzWidth:350,nzFooter:i});t&&e.componentInstance.patchFormValues(t),e.componentInstance.setType(ce.MATERIAPRIMA)}};s.\u0275fac=function(i){return new(i||s)(_(me),_(L),_(Y),_(O))},s.\u0275cmp=T({type:s,selectors:[["app-stock-insumos"]],standalone:!0,features:[P],decls:29,vars:13,consts:[["tablaFamilias",""],["menu","nzDropdownMenu"],[1,"header-container"],[1,"title"],[1,"spacer"],["class","buttonAdd","nz-button","",3,"click",4,"ngIf"],[3,"nzData","nzPageSize","nzScroll"],["nzWidth","auto"],[3,"nzVisibleChange","nzVisible","nzActive","nzDropdownMenu"],[1,"buscarIcon",3,"icon"],["nzWidth","auto",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","Search name",3,"ngModelChange","ngModel"],["nz-button","","nzSize","small",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["nz-button","",1,"buttonAdd",3,"click"],[3,"icon"],[4,"ngIf"],["class","tableHover",3,"click",4,"ngIf"],[1,"tableHover",3,"click"],[1,"tableIcon",3,"icon"]],template:function(i,e){if(i&1){let c=I();a(0,"body")(1,"div",2)(2,"h1",3),d(3,"Insumos"),o(),C(4,"div",4),b(5,ue,3,1,"button",5),o(),a(6,"nz-table",6,0)(8,"thead")(9,"tr")(10,"th",7),d(11,"NOMBRE "),a(12,"nz-filter-trigger",8),k("nzVisibleChange",function(u){return f(c),y(e.visible,u)||(e.visible=u),g(u)}),C(13,"fa-icon",9),o()(),a(14,"th",7),d(15,"CANTIDAD"),o(),b(16,fe,2,0,"th",10)(17,ge,2,0,"th",10),o()(),a(18,"tbody"),b(19,be,7,4,"tr",11),o()(),a(20,"nz-dropdown-menu",null,1)(22,"div",12)(23,"div",13)(24,"input",14),k("ngModelChange",function(u){return f(c),y(e.searchValue,u)||(e.searchValue=u),g(u)}),o(),a(25,"button",15),v("click",function(){return f(c),g(e.search())}),d(26,"Buscar"),o(),a(27,"button",16),v("click",function(){return f(c),g(e.reset())}),d(28,"Limpiar"),o()()()()()}if(i&2){let c=S(7),h=S(21);r(5),m("ngIf",e.isAdmin),r(),m("nzData",e.datosTabla)("nzPageSize",7)("nzScroll",V(12,pe)),r(6),w("nzVisible",e.visible),m("nzActive",e.searchValue.length>0)("nzDropdownMenu",h),r(),m("icon",e.buscarIcon),r(3),m("ngIf",e.isAdmin),r(),m("ngIf",e.isAdmin),r(2),m("ngForOf",c.data),r(5),w("ngModel",e.searchValue)}},dependencies:[E,A,F,W,N,D,R,ae,ie,ee,te,re,ne,oe,$,Z,X,H,j,B,U,q,G],styles:["body[_ngcontent-%COMP%]{background-color:#bdd2c4;display:flex;justify-content:center;flex-direction:column;align-items:center;margin:0;padding:160px}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#395144;color:#f0ebce;white-space:nowrap;text-align:center}.buscarIcon[_ngcontent-%COMP%]{color:#8a6a44;font-size:16px}.buscarIcon[_ngcontent-%COMP%]:hover{color:orange}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #f1ecec}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none}.header-container[_ngcontent-%COMP%]{padding-right:20px;width:100%;display:flex;align-items:center;margin-bottom:20px}.title[_ngcontent-%COMP%]{margin:0;color:#395144;font-size:30px;font-weight:700}.spacer[_ngcontent-%COMP%]{flex-grow:1}.buttonAdd[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:7px;margin-left:auto;background-color:#8a6a44!important;border-color:#8a6a44!important;color:#f0ebce!important}.tableHover[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}.tableHover[_ngcontent-%COMP%]:hover{cursor:pointer}.tableHover[_ngcontent-%COMP%]:hover > .tableIcon[_ngcontent-%COMP%]{color:orange}.tableIcon[_ngcontent-%COMP%]{color:#8a6a44;font-weight:700;font-size:18px}.search-box[_ngcontent-%COMP%]{padding:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:188px;margin-bottom:8px;display:block}.search-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px}.search-button[_ngcontent-%COMP%]{margin-right:8px;background-color:#8a6a44;border-color:#8a6a44;color:#f0ebce}"]});let n=s;return n})();var Le=[{path:"",component:de,canActivate:[se]}];export{Le as INSUMOS_ROUTES};
