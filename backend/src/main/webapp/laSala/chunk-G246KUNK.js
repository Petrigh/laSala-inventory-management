import{a as st,b as dt}from"./chunk-WEBN3R7M.js";import{b as ct}from"./chunk-3TB4TDSS.js";import{a as Y,b as Z,c as lt}from"./chunk-644H75FQ.js";import{A as ot,B as it,C as rt,D as at,a as G,b as q,d as J,n as K,o as Q,s as X,w as $,x as tt,y as et,z as nt}from"./chunk-LR7HS7ST.js";import{Va as U,Wa as B,Xa as j,Ya as H,c as N,f as D,h as R,r as W}from"./chunk-RDDHBD4O.js";import"./chunk-WYLD3DAA.js";import{n as L}from"./chunk-JBFZACTD.js";import{$b as k,Ca as f,Cc as E,Da as g,Db as a,Dc as F,Eb as i,Fb as C,Ib as z,Kc as A,Lb as v,Nb as p,Ub as M,Vb as m,Xb as P,Zb as w,_b as y,bc as I,cc as V,d as x,db as r,eb as _,nb as T,ra as O,tb as b,v as S,vb as d}from"./chunk-FXUVGPCX.js";var pt=()=>({y:"450px"});function ut(n,l){if(n&1){let s=z();a(0,"button",17),v("click",function(){f(s);let o=p();return g(o.showModal(void 0))}),C(1,"fa-icon",18),m(2," A\xF1adir Producto "),i()}if(n&2){let s=p();r(),d("icon",s.addIcon)}}function ft(n,l){n&1&&(a(0,"th",7),m(1,"PRECIO UNITARIO"),i())}function gt(n,l){n&1&&(a(0,"th",7),m(1,"EDITAR"),i())}function ht(n,l){if(n&1&&(a(0,"td"),m(1),i()),n&2){let s=p().$implicit;r(),P(" ",s.precioUnitario," ")}}function _t(n,l){if(n&1){let s=z();a(0,"td",21),v("click",function(){f(s);let o=p().$implicit,t=p();return g(t.showModal(o))}),C(1,"fa-icon",22),i()}if(n&2){let s=p(2);r(),d("icon",s.editIcon)}}function bt(n,l){if(n&1&&(a(0,"tr")(1,"td"),m(2),i(),a(3,"td"),m(4),i(),b(5,ht,2,1,"td",19)(6,_t,2,1,"td",20),i()),n&2){let s=l.$implicit,e=p();r(2),P(" ",s.nombre," "),r(2),P(" ",s.cantidad," "),r(),d("ngIf",e.isAdmin),r(),d("ngIf",e.isAdmin)}}var mt=(()=>{let l=class l{constructor(e,o,t,c){this.stockService=e,this.userService=o,this.modal=t,this.viewContainerRef=c,this.addIcon=Q,this.buscarIcon=K,this.editIcon=J,this.listProductos=[],this.datosTabla=[],this.isAdmin=!1,this.searchValue="",this.visible=!1}ngOnInit(){this.userService.isAdmin$.subscribe(e=>{this.isAdmin=e}),this.stockService.getProductos().subscribe(e=>{this.listProductos=e,this.datosTabla=e})}reset(){this.searchValue="",this.search()}search(){this.visible=!1,this.datosTabla=this.listProductos.filter(e=>e.nombre.toLocaleUpperCase().indexOf(this.searchValue.toLocaleUpperCase())!==-1)}onSubmit(e,o,t){return x(this,null,function*(){try{if(o.validateForm.valid)yield S(this.stockService.updateBien(o.submitForm(),e)),t.close(),this.listProductos=yield S(this.stockService.getProductos()),this.datosTabla=this.listProductos;else for(let c in o.validateForm.controls)o.validateForm.controls.hasOwnProperty(c)&&(o.validateForm.controls[c].markAsDirty(),o.validateForm.controls[c].updateValueAndValidity())}catch(c){console.error("Error updating Producots",c)}})}showModal(e){let o=[{label:"Cancelar",type:"text",danger:!1,onClick:()=>t.destroy()},{label:e?"Editar":"Cargar",type:"primary",danger:!1,onClick:()=>x(this,null,function*(){this.modal.confirm({nzCentered:!0,nzTitle:"Confirmar "+(e?"edicion?":"guardado?"),nzOnOk:()=>this.onSubmit(!!e,t.getContentComponent(),t),nzOkText:e?"Editar":"Guardar",nzCancelText:"Cancelar"})})}],t=this.modal.create({nzTitle:e?"Editar Producto":"Cargar Producto",nzContent:st,nzViewContainerRef:this.viewContainerRef,nzCentered:!0,nzWidth:350,nzFooter:o});e&&t.componentInstance.patchFormValues(e),t.componentInstance.setType(ct.PRODUCTO)}};l.\u0275fac=function(o){return new(o||l)(_(dt),_(L),_(Y),_(T))},l.\u0275cmp=O({type:l,selectors:[["app-stock-productos"]],standalone:!0,features:[I],decls:29,vars:13,consts:[["tablaFamilias",""],["menu","nzDropdownMenu"],[1,"header-container"],[1,"title"],[1,"spacer"],["class","buttonAdd","nz-button","",3,"click",4,"ngIf"],[3,"nzData","nzPageSize","nzScroll"],["nzWidth","auto"],[3,"nzVisibleChange","nzVisible","nzActive","nzDropdownMenu"],[1,"buscarIcon",3,"icon"],["nzWidth","auto",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","Search name",3,"ngModelChange","ngModel"],["nz-button","","nzSize","small",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["nz-button","",1,"buttonAdd",3,"click"],[3,"icon"],[4,"ngIf"],["class","tableHover",3,"click",4,"ngIf"],[1,"tableHover",3,"click"],[1,"tableIcon",3,"icon"]],template:function(o,t){if(o&1){let c=z();a(0,"body")(1,"div",2)(2,"h1",3),m(3,"Productos"),i(),C(4,"div",4),b(5,ut,3,1,"button",5),i(),a(6,"nz-table",6,0)(8,"thead")(9,"tr")(10,"th",7),m(11,"NOMBRE "),a(12,"nz-filter-trigger",8),k("nzVisibleChange",function(u){return f(c),y(t.visible,u)||(t.visible=u),g(u)}),C(13,"fa-icon",9),i()(),a(14,"th",7),m(15,"CANTIDAD"),i(),b(16,ft,2,0,"th",10)(17,gt,2,0,"th",10),i()(),a(18,"tbody"),b(19,bt,7,4,"tr",11),i()(),a(20,"nz-dropdown-menu",null,1)(22,"div",12)(23,"div",13)(24,"input",14),k("ngModelChange",function(u){return f(c),y(t.searchValue,u)||(t.searchValue=u),g(u)}),i(),a(25,"button",15),v("click",function(){return f(c),g(t.search())}),m(26,"Buscar"),i(),a(27,"button",16),v("click",function(){return f(c),g(t.reset())}),m(28,"Limpiar"),i()()()()()}if(o&2){let c=M(7),h=M(21);r(5),d("ngIf",t.isAdmin),r(),d("nzData",t.datosTabla)("nzPageSize",7)("nzScroll",V(12,pt)),r(6),w("nzVisible",t.visible),d("nzActive",t.searchValue.length>0)("nzDropdownMenu",h),r(),d("icon",t.buscarIcon),r(3),d("ngIf",t.isAdmin),r(),d("ngIf",t.isAdmin),r(2),d("ngForOf",c.data),r(5),w("ngModel",t.searchValue)}},dependencies:[F,E,A,W,N,D,R,at,ot,tt,et,rt,nt,it,$,Z,X,H,j,U,B,q,G],styles:["body[_ngcontent-%COMP%]{background-color:#bdd2c4;display:flex;justify-content:center;flex-direction:column;align-items:center;margin:0;padding:160px}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#395144;color:#f0ebce;white-space:nowrap;text-align:center}.buscarIcon[_ngcontent-%COMP%]{color:#8a6a44;font-size:16px}.buscarIcon[_ngcontent-%COMP%]:hover{color:orange}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #f1ecec}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none}.header-container[_ngcontent-%COMP%]{padding-right:20px;width:100%;display:flex;align-items:center;margin-bottom:20px}.title[_ngcontent-%COMP%]{margin:0;color:#395144;font-size:30px;font-weight:700}.spacer[_ngcontent-%COMP%]{flex-grow:1}.buttonAdd[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:7px;margin-left:auto;background-color:#8a6a44!important;border-color:#8a6a44!important;color:#f0ebce!important}.tableHover[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}.tableHover[_ngcontent-%COMP%]:hover{cursor:pointer}.tableHover[_ngcontent-%COMP%]:hover > .tableIcon[_ngcontent-%COMP%]{color:orange}.tableIcon[_ngcontent-%COMP%]{color:#8a6a44;font-weight:700;font-size:18px}.search-box[_ngcontent-%COMP%]{padding:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:188px;margin-bottom:8px;display:block}.search-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px}.search-button[_ngcontent-%COMP%]{margin-right:8px;background-color:#8a6a44;border-color:#8a6a44;color:#f0ebce}"]});let n=l;return n})();var Lt=[{path:"",component:mt,canActivate:[lt]}];export{Lt as PRODUCTOSS_ROUTES};
